!function(t,s,i,e){"use strict";function r(s,i){this.element=s,this.settings=t.extend({},n,i),this._defaults=n,this._name=a,this.init()}Array.prototype.filter||(Array.prototype.filter=function(t){if(this===e||null===this)throw new TypeError(this+"is not an object");if(!(t instanceof Function))throw new TypeError(t+" is not a function");for(var s,i=Object(this),r=arguments[1],a=i instanceof String?i.split(""):i,n=Math.max(Math.min(a.length,9007199254740991),0)||0,h=-1,o=[];++h<n;)s=a[h],h in a&&t.call(r,s,h,i)&&o.push(s);return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,s){var i;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if(0===r)return-1;var a=+s||0;if(1/0===Math.abs(a)&&(a=0),a>=r)return-1;for(i=Math.max(0>a?r-Math.abs(a):a,0);r>i;){if(i in e&&e[i]===t)return i;i++}return-1});var a="unorphanize",n={words:2,wrapEl:"",className:"",append:""};t.extend(r.prototype,{init:function(){var s=this,i=t(this.element);if(0===t.trim(i.text()).length)return!1;this.text=t.trim(i.html()),this.startTags=this.text.match(/<([A-Z][A-Z0-9]*)\b[^>]*>/gi),this.startTagsCount=null!==this.startTags?this.startTags.length:0,this.startPlaceholders=[];for(var e=0;e<this.startTagsCount;e++)this.startPlaceholders.push("__"+e+"__"),this.text=this.text.replace(s.startTags[e],s.startPlaceholders[e]);this.endTags=this.text.match(/<\/[A-Z][A-Z0-9]*>/gi),this.endTagsCount=null!==this.endTags?this.endTags.length:0,this.endPlaceholders=[];for(var e=0;e<this.endTagsCount;e++)this.endPlaceholders.push("~~"+e+"~~"),this.text=this.text.replace(s.endTags[e],s.endPlaceholders[e]);this.wordArray=this.text.split(/\s+/);var r=1;this.wordPositions=[],this.cleanWordArray=this.wordArray.map(function(t,i){return t.match(/__[0-9]+__\b/gi)||t.match(/~~[0-9]+~~\b/gi)?(r++,!1):(s.wordPositions.push(i),t)}),this.cleanWordArray=this.cleanWordArray.filter(function(t){return t}),"number"!=typeof this.settings.words||this.settings.words<1?this.settings.words=this._defaults.words:1===this.settings.words?(this.settings.wrapEl=this.settings.wrapEl.length?this.settings.wrapEl:"span",this.settings.className=this.settings.className.length?this.settings.className:"u-nowrap"):this.settings.words<this.cleanWordArray.length||(this.settings.words=this.cleanWordArray.length),this.lastWordPos=this.cleanWordArray.length-this.settings.words,this.lastWordIndex=this.wordPositions[this.lastWordPos],this.firstPart=s.wordArray.slice(0,s.lastWordIndex).join(" "),this.lastPart=s.wordArray.slice(s.lastWordIndex).join(" "),"string"!=typeof this.settings.wrapEl&&(this.settings.wrapEl=this._defaults.wrapEl),"string"!=typeof this.settings.className&&(this.settings.className=this._defaults.className),"string"!=typeof this.settings.append&&(this.settings.append=this._defaults.append),this.settings.wrapEl?this.text=this.firstPart+" <"+this.settings.wrapEl+' class="'+this.settings.className+'">'+this.lastPart+this.settings.append+"</"+this.settings.wrapEl+">":(this.lastPart=this.lastPart.split(" ").join("&nbsp;"),this.text=this.firstPart+" "+this.lastPart);for(var e=0;e<this.startTagsCount;e++){var a=RegExp(this.startPlaceholders[e]);this.text=this.text.replace(a,this.startTags[e])}for(var e=0;e<this.endTagsCount;e++){var a=RegExp(this.endPlaceholders[e]);this.text=this.text.replace(a,this.endTags[e])}i.html(this.text)}}),t.fn[a]=function(s){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new r(this,s))})}}(jQuery,window,document);